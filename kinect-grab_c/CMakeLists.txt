cmake_minimum_required(VERSION 2.8.11)

project(kinect-grab_c)

set(KINECT_GRAB_C_BIN_DIR  ${CMAKE_CURRENT_SOURCE_DIR}/bin)

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${KINECT_GRAB_C_BIN_DIR})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${KINECT_GRAB_C_BIN_DIR})
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${KINECT_GRAB_C_BIN_DIR})

foreach( OUTPUTCONFIG ${CMAKE_CONFIGURATION_TYPES} )
	string( TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG )
	set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${KINECT_GRAB_C_BIN_DIR})
	set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${KINECT_GRAB_C_BIN_DIR})
	set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${KINECT_GRAB_C_BIN_DIR})
endforeach( OUTPUTCONFIG CMAKE_CONFIGURATION_TYPE)

set(CMAKE_MACOSX_RPATH FALSE)

#Find libfreenect
find_library(FREENECT_LIBRARY freenect)
find_library(FREENECT_SYNC_LIBRARY freenect_sync)
find_library(PTHREADS_LIBRARY pthreadVC2)
find_library(USB_LIBRARY NAMES libusb libusb-1.0)
find_path(FREENECT_INCLUDE_DIR libfreenect.h)
include_directories(${FREENECT_INCLUDE_DIR})

add_subdirectory(src)